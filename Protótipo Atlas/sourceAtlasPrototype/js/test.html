<!DOCTYPE html>
<html>
<head>
	<script type="text/javascript" src="SaveScript.js" ></script>
	<script type="text/javascript" src="ModelScript.js" ></script>
	<script type="text/javascript" src="FeatureScript.js" ></script>
	<script type="text/javascript" src="AssociationScript.js" ></script>
	<script type="text/javascript" src="DownloadScript.js" ></script>
	<script type="text/javascript" src="ParserScript.js" ></script>
	<script type="text/javascript" src="BackwardParserScript.js" ></script>
</head>
<body>



<h2>My First JavaScript</h2>

<button type="button" onclick="document.getElementById('demo').innerHTML = parser()">
Click me to display the parsing result.</button>

<p id="demo"></p>

<button type="button" onclick="document.getElementById('demo2').innerHTML = backParser()">
Click me to display the backward parsing result.</button>



<p id="demo2"></p>

<script>


var f1 = new Feature("a", "mandatory");
var f2 = new Feature("b", "mandatory");	
var f3 = new Feature("c", "optional");
var f4 = new Feature("d", "mandatory");
var f5 = new Feature("e", "optional");
var f6 = new Feature("f", "alternative");
var f7 = new Feature("g", "alternative");
var f8 = new Feature("h", "alternative");
var a1 = new Association(f1,f2);
var a2 = new Association(f1,f3);
var a3 = new Association(f2,f4);
var a4 = new Association(f2,f5);
var a5 = new Association(f2,f6);
var a6 = new Association(f3,f7);
var a7 = new Association(f3,f8);
var m1 = new Model("m1");
m1.addFeature(f1);
m1.addFeature(f2);
m1.addFeature(f3);
m1.addFeature(f4);
m1.addFeature(f5);
m1.addFeature(f6);
m1.addFeature(f7);
m1.addFeature(f8);
m1.addAssociation(a1);
m1.addAssociation(a2);
m1.addAssociation(a3);
m1.addAssociation(a4);
m1.addAssociation(a5);
m1.addAssociation(a6);
m1.addAssociation(a7);

/*
var f1 = new Feature("a", "mandatory");
var f2 = new Feature("b", "mandatory");	
var f3 = new Feature("c", "optional");
var f4 = new Feature("d", "alternative");
var f5 = new Feature("e", "optional");
var f6 = new Feature("f", "alternative");
var f7 = new Feature("g", "optional");
var f8 = new Feature("g5", "mandatory");
var f9 = new Feature("g12", "alternative");
var a1 = new Association(f1,f2);
var a2 = new Association(f1,f3);
var a3 = new Association(f2,f4);
var a4 = new Association(f2,f5);
var a5 = new Association(f2,f6);
var a6 = new Association(f2,f7);
var a7 = new Association(f2,f8);
var a8 = new Association(f2,f9);
var m1 = new Model("m1");
m1.addFeature(f1);
m1.addFeature(f2);
m1.addFeature(f3);
m1.addFeature(f4);
m1.addFeature(f5);
m1.addFeature(f6);
m1.addFeature(f7);
m1.addFeature(f8);
m1.addFeature(f9);
m1.addAssociation(a1);
m1.addAssociation(a2);
m1.addAssociation(a3);
m1.addAssociation(a4);
m1.addAssociation(a5);
m1.addAssociation(a6);
m1.addAssociation(a7);
m1.addAssociation(a8);
*/

function parser(){

	rpl = parseModelToString(m1);
   downloadContent("testando.txt",rpl);
   return rpl;
}



function backParser(){

var str = document.getElementById("textArea").value;

var m1 = parseToModel(str);
var str2 = JSON.stringify(m1);

return str2;
}


</script>


<textarea rows="40" cols="100" id="textArea">
	  
{ "class": "go.GraphLinksModel",
  "linkLabelKeysProperty": "labelKeys",
  "nodeDataArray": [ 
{"key":"Root", "category":"mandatory"},
{"key":"F1", "category":"mandatory"},
{"key":"F2", "category":"alternative"},
{"key":"F3", "category":"alternative"},
{"key":"F4", "category":"optional"},
{"key":"F5", "category":"optional"},
{"key":"F12", "category":"optional"},
{"key":"F13", "category":"alternative"},
{"key":"F14", "category":"alternative"},
{"key":"F15", "category":"alternative"},
{"key":"Root-F1", "category":"LinkLabel"},
{"key":"Root-F5", "category":"LinkLabel"},
{"key":"Root-F12", "category":"LinkLabel"},
{"key":"F1-F2", "category":"LinkLabel"},
{"key":"F1-F3", "category":"LinkLabel"},
{"key":"F1-F4", "category":"LinkLabel"},
{"key":"F12-F13", "category":"LinkLabel"},
{"key":"F12-F14", "category":"LinkLabel"},
{"key":"F12-F15", "category":"LinkLabel"},
{"key":"Alt1", "category":"LinkLabel"},
{"key":"Alt2", "category":"LinkLabel"}
 ],
  "linkDataArray": [ 
{"from":"Root", "to":"F1", "labelKeys":[ "Root-F1" ]},
{"from":"Root", "to":"F5", "labelKeys":[ "Root-F5" ],"category":"optional"},
{"from":"Root", "to":"F12", "labelKeys":[ "Root-F12" ],"category":"optional"},
{"from":"F1", "to":"F2", "labelKeys":[ "F1-F2" ]},
{"from":"F1", "to":"F3", "labelKeys":[ "F1-F3" ]},
{"from":"F1", "to":"F4", "labelKeys":[ "F1-F4" ],"category":"optional"},
{"from":"F1-F3", "to":"F1-F2", "labelKeys":[ "Alt1" ], "category":"linkToLink"},
{"from":"F12", "to":"F13", "labelKeys":[ "F12-F13" ]},
{"from":"F12", "to":"F14", "labelKeys":[ "F12-F14" ]},
{"from":"F12", "to":"F15", "labelKeys":[ "F12-F15" ]},
{"from":"F12-F15", "to":"F12-F13", "labelKeys":[ "Alt2" ], "category":"linkToLink"}
 ]}
      
	  </textarea>

</body>
</html> 
